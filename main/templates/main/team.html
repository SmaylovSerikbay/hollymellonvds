{% extends 'main/base.html' %}
{% load static %}
{% load custom_filters %}

{% block content %}
<section class="team-section">
    <!-- Hero секция -->
    <div class="hero-section">
        <div class="container">
            <h1 class="hero-title">{{ team.title }}</h1>
            <p class="hero-subtitle">{{ team.subtitle }}</p>
        </div>
        <div class="hero-background"></div>
    </div>

    <!-- Основной контент -->
    <div class="container">
        <div class="main-content">
            {% for paragraph in team.main_text|split:'\n\n' %}
                <p class="content-paragraph">
                    {% if 'Holy Melon Management' in paragraph %}
                        {% with parts=paragraph|split:'Holy Melon Management' %}
                            {{ parts.0 }}<span class="brand-name">Holy Melon Management</span>{{ parts.1 }}
                        {% endwith %}
                    {% elif 'Holy Melon' in paragraph %}
                        {% with parts=paragraph|split:'Holy Melon' %}
                            {{ parts.0 }}<span class="brand-name">Holy Melon</span>{{ parts.1 }}
                        {% endwith %}
                    {% else %}
                        {{ paragraph|safe }}
                    {% endif %}
                </p>
            {% endfor %}
        </div>

        <!-- Статистика -->
        <div class="statistics-section">
            <div class="statistics-grid">
                {% for stat in statistics %}
                    <div class="statistic-card">
                        {% with parts=stat.text|split:'—' %}
                            <div class="statistic-content">
                                <div class="statistic-number">{{ parts.0|safe }}</div>
                                <div class="statistic-text">{{ parts.1|safe }}</div>
                            </div>
                        {% endwith %}
                    </div>
                {% endfor %}
            </div>
        </div>

        <!-- Галерея -->
        <div class="gallery-section">
            <div class="gallery-grid">
                <div class="gallery-main">
                    <img src="{{ team.image1.url }}" alt="Наша команда" loading="lazy">
                </div>
                <div class="gallery-side">
                    <img src="{{ team.image2.url }}" alt="Наша команда" loading="lazy">
                </div>
            </div>
        </div>

        <!-- О нас -->
        <div class="about-section">
            <div class="about-content">
                <h2 class="section-title">{{ team.about_title }}</h2>
                <div class="about-text">
                    {% for paragraph in team.about_text|split:'\n\n' %}
                        <p>{{ paragraph|safe }}</p>
                    {% endfor %}
                </div>
            </div>
        </div>

        <!-- Кто мы -->
        <div class="who-we-are-section">
            <h2 class="section-title">{{ team.who_we_are_title }}</h2>
            <div class="features-grid">
                {% for item in who_we_are_items %}
                    <div class="feature-card">
                        <div class="feature-icon">•</div>
                        <div class="feature-text">{{ item.text|safe }}</div>
                    </div>
                {% endfor %}
            </div>
            <p class="conclusion-text">{{ team.who_we_are_conclusion }}</p>
        </div>

        <!-- Заведения -->
        <div class="venues-section">
            <h2 class="section-title">Наши заведения</h2>
            <div class="venues-grid">
                {% regroup establishments by city as city_list %}
                {% for city in city_list %}
                    <div class="city-card">
                        <h3 class="city-name">{{ city.grouper }}</h3>
                        <div class="venues-list">
                            {% for est in city.list %}
                                <div class="venue-item">
                                    <span class="venue-name">{{ est.name }}</span>
                                    <span class="venue-year">{{ est.year }}</span>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>

        <!-- Набор сотрудников -->
        <div class="recruitment-section">
            <div class="recruitment-content">
                {% for paragraph in team.recruitment_text|split:'\n\n' %}
                    <p class="recruitment-text">{{ paragraph|safe }}</p>
                {% endfor %}
                <div class="contact-block">
                    <p class="contact-text">Пишите нам на почту:</p>
                    <a href="mailto:{{ team.email }}" class="contact-email">{{ team.email }}</a>
                </div>
            </div>
        </div>
    </div>
</section>

<style>
:root {
    --primary-color: #1a1a1a;
    --secondary-color: #2d2d2d;
    --accent-color: #404040;
    --text-color: #4a4a4a;
    --light-text: #ffffff;
    --background: #ffffff;
    --card-bg: #f8f8f8;
    --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    --hover-shadow: 0 8px 15px rgba(0, 0, 0, 0.15);
    --border-radius: 16px;
    --transition: all 0.3s ease;
    --container-width: 1200px;
    --spacing: 120px;
}

.container {
    max-width: var(--container-width);
    margin: 0 auto;
    padding: 0 20px;
}

/* Hero секция */
.hero-section {
    position: relative;
    height: 60vh;
    min-height: 500px;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    color: var(--light-text);
    overflow: hidden;
    margin-bottom: var(--spacing);
}

.hero-background {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
    z-index: -1;
}

.hero-title {
    font-size: 64px;
    font-weight: 800;
    margin-bottom: 24px;
    line-height: 1.2;
}

.hero-subtitle {
    font-size: 24px;
    font-weight: 400;
    opacity: 0.9;
    max-width: 800px;
    margin: 0 auto;
}

/* Основной контент */
.main-content {
    max-width: 800px;
    margin: 0 auto var(--spacing);
}

.content-paragraph {
    font-size: 18px;
    line-height: 1.8;
    color: var(--text-color);
    margin-bottom: 24px;
}

.brand-name {
    color: var(--accent-color);
    font-weight: 700;
}

/* Статистика */
.statistics-section {
    margin-bottom: var(--spacing);
    padding: 80px 0;
    background: var(--primary-color);
    color: var(--light-text);
}

.statistics-grid {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 30px;
}

.statistic-card {
    text-align: center;
    padding: 20px;
    position: relative;
}

.statistic-card:not(:last-child)::after {
    content: '';
    position: absolute;
    right: 0;
    top: 20%;
    height: 60%;
    width: 1px;
    background: rgba(255, 255, 255, 0.1);
}

.statistic-number {
    font-size: 48px;
    font-weight: 800;
    margin-bottom: 16px;
    background: linear-gradient(135deg, #fff 0%, #f5f5f5 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

.statistic-text {
    font-size: 16px;
    line-height: 1.4;
    opacity: 0.9;
}

/* Галерея */
.gallery-section {
    margin-bottom: var(--spacing);
}

.gallery-grid {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 30px;
    height: 600px;
}

.gallery-main, .gallery-side {
    position: relative;
    border-radius: var(--border-radius);
    overflow: hidden;
    box-shadow: var(--shadow);
}

.gallery-main img, .gallery-side img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: var(--transition);
}

.gallery-main:hover img, .gallery-side:hover img {
    transform: scale(1.05);
}

/* О нас */
.about-section {
    margin-bottom: var(--spacing);
}

.section-title {
    font-size: 36px;
    font-weight: 700;
    color: var(--primary-color);
    margin-bottom: 40px;
    text-align: center;
}

.about-text p {
    font-size: 18px;
    line-height: 1.8;
    color: var(--text-color);
    margin-bottom: 24px;
}

/* Кто мы */
.who-we-are-section {
    margin-bottom: var(--spacing);
}

.features-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 30px;
    margin-bottom: 40px;
}

.feature-card {
    background: var(--card-bg);
    padding: 30px;
    border-radius: var(--border-radius);
    box-shadow: var(--shadow);
    transition: var(--transition);
}

.feature-card:hover {
    transform: translateY(-5px);
    box-shadow: var(--hover-shadow);
}

.feature-icon {
    font-size: 24px;
    color: var(--accent-color);
    margin-bottom: 16px;
}

.feature-text {
    font-size: 18px;
    line-height: 1.6;
    color: var(--text-color);
}

.conclusion-text {
    font-size: 20px;
    line-height: 1.6;
    color: var(--text-color);
    text-align: center;
    max-width: 800px;
    margin: 0 auto;
}

/* Заведения */
.venues-section {
    margin-bottom: var(--spacing);
}

.venues-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 30px;
}

.city-card {
    background: var(--card-bg);
    padding: 30px;
    border-radius: var(--border-radius);
    box-shadow: var(--shadow);
    transition: var(--transition);
}

.city-card:hover {
    transform: translateY(-5px);
    box-shadow: var(--hover-shadow);
}

.city-name {
    font-size: 24px;
    font-weight: 700;
    color: var(--primary-color);
    margin-bottom: 24px;
    padding-bottom: 12px;
    border-bottom: 2px solid var(--accent-color);
}

.venue-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 0;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.venue-name {
    font-weight: 600;
    color: var(--text-color);
}

.venue-year {
    color: var(--accent-color);
}

/* Набор сотрудников */
.recruitment-section {
    background: var(--primary-color);
    color: var(--light-text);
    padding: 80px 0;
    text-align: center;
    border-radius: var(--border-radius);
    margin-bottom: var(--spacing);
}

.recruitment-content {
    max-width: 800px;
    margin: 0 auto;
}

.recruitment-text {
    font-size: 20px;
    line-height: 1.6;
    margin-bottom: 24px;
}

.contact-block {
    margin-top: 40px;
}

.contact-text {
    font-size: 18px;
    margin-bottom: 12px;
}

.contact-email {
    display: inline-block;
    color: var(--light-text);
    font-size: 20px;
    text-decoration: none;
    padding: 12px 24px;
    border: 2px solid rgba(255, 255, 255, 0.2);
    border-radius: 30px;
    transition: var(--transition);
}

.contact-email:hover {
    background: rgba(255, 255, 255, 0.1);
    border-color: rgba(255, 255, 255, 0.3);
}

/* Адаптивность */
@media (max-width: 1200px) {
    :root {
        --spacing: 80px;
    }

    .hero-title {
        font-size: 48px;
    }

    .statistics-grid {
        grid-template-columns: repeat(3, 1fr);
    }
}

@media (max-width: 992px) {
    .gallery-grid {
        grid-template-columns: 1fr;
        height: auto;
    }

    .gallery-main, .gallery-side {
        height: 400px;
    }

    .statistics-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (max-width: 768px) {
    :root {
        --spacing: 60px;
    }

    .hero-title {
        font-size: 36px;
    }

    .hero-subtitle {
        font-size: 18px;
    }

    .statistic-number {
        font-size: 36px;
    }
}

@media (max-width: 576px) {
    .statistics-grid {
        grid-template-columns: 1fr;
    }

    .gallery-main, .gallery-side {
        height: 300px;
    }

    .venue-item {
        flex-direction: column;
        align-items: flex-start;
        gap: 8px;
    }
}

/* Темная тема */
[data-theme="dark"] {
    --primary-color: #ffffff;
    --secondary-color: #e0e0e0;
    --text-color: #cccccc;
    --background: #1a1a1a;
    --card-bg: #2d2d2d;
}

[data-theme="dark"] .hero-background {
    background: linear-gradient(135deg, #2d2d2d 0%, #1a1a1a 100%);
}

[data-theme="dark"] .venue-item {
    border-bottom-color: rgba(255, 255, 255, 0.1);
}
</style>
{% endblock %} 